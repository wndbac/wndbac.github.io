

# OpenAI API ä»£ç†

ç”±äº OpenAI åŠ GFW çš„åŒé‡é™åˆ¶ï¼Œå›½å†…å¼€å‘è€…æ— æ³•è®¿é—® OpenAI çš„ APIï¼Œç°æä¾›ä»£ç†æœåŠ¡åœ°å€ä¾›å¼€å‘è€…**å…è´¹**ä½¿ç”¨ã€‚

âœ… ä»£ç†åœ°å€ï¼š[https://openai.wndbac.cn](https://openai.wndbac.cn)ï¼Œç›´æ¥æ›¿æ¢å®˜æ–¹çš„ [https://api.openai.com](https://api.openai.com)ï¼Œæ”¯æŒå®˜æ–¹æ‰€æœ‰v1æ¥å£ã€‚

âš ï¸ æœ¬ä»£ç†æœåŠ¡é€šè¿‡Cloudflareåå‘ä»£ç†è®¿é—®OpenAIçš„æ¥å£ï¼Œåªåšä»£ç†ä¸­è½¬ï¼Œä¸ä¼šä¿å­˜ä»»ä½•æ•°æ®ï¼

ğŸš¨ è¯·å‹¿ä½¿ç”¨é­”æ³•ä¸Šç½‘çš„æ–¹å¼ç”¨ä½ çš„ `ApiKey` å»è°ƒç”¨ `api.openai.com` çš„æ¥å£ï¼Œå¦åˆ™å¤§æ¦‚ç‡ä¼šè¢« OpenAI å°å·ï¼

## 1ã€ğŸ”” è·å–ApiKey

æ³¨å†Œ [OpenAI](https://platform.openai.com/account/api-keys) è´¦å·ï¼Œè·å–ä½ çš„ [ApiKey](https://platform.openai.com/account/api-keys)ï¼Œè¿‡ç¨‹ç•¥ã€‚

## 2ã€ğŸ’¬ èŠå¤©æ¥å£

#### âš ï¸ ä¸å†æ¨èä½¿ç”¨æœ¬æ¥å£ï¼Œåé¢å°†åºŸå¼ƒã€‚

> POST [https://openai.wndbac.cn/pro/chat/completions](https://openai.wndbac.cn/pro/chat/completions)

è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | é•¿åº¦ | å¿…é¡» | å¤‡æ³¨ |
| :----- | :----- | :----- | :----- | :----- |
| apiKey | String | 64 | æ˜¯ | OpenAI çš„ ApiKey |
| sessionId | String | 64 | æ˜¯ | ä¼šè¯IDï¼Œå…³è”ä¸Šä¸‹æ–‡ï¼Œæ¨èä½¿ç”¨UUIDä½œä¸ºsessionId |
| content | String | 1000 | æ˜¯ | å‘é€çš„å†…å®¹ |

è¯·æ±‚ç¤ºä¾‹ï¼ˆ**Content-Type = application/json**ï¼‰

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;apiKey&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;your_openai_api_key&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sessionId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;8d1cb9b0-d535-43a8-b738-4f61b1608579&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ æ˜¯è°ï¼Ÿ&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

å“åº”ç¤ºä¾‹

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ‰§è¡ŒæˆåŠŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æˆ‘æ˜¯ä¸€åäººå·¥æ™ºèƒ½åŠ©æ‰‹ï¼Œç”¨äºååŠ©å›ç­”é—®é¢˜å’Œæä¾›å»ºè®®ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¸æˆ‘è¿›è¡Œå¯¹è¯æ¥è·å–æ‚¨éœ€è¦çš„ä¿¡æ¯æˆ–å¸®åŠ©ã€‚&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

æœ¬æ¥å£ä½¿ç”¨çš„æ˜¯ `gpt-3.5-turbo` æ¨¡å‹ï¼Œæ”¯æŒé€šè¿‡ä¸Šä¸‹æ–‡å†…å®¹è¿›è¡Œè¿ç»­å¯¹è¯ã€‚

æœ¬æ¥å£å¯¹å®˜æ–¹çš„æ¥å£è¿›è¡Œäº†å°è£…ï¼Œå¼€å‘è€…åªéœ€ä¸ºæ¯ä¸ª `ApiKey` ä¸‹çš„æ¯ä¸ªä¼šè¯åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„ `sessionId` å³å¯å®ç°è¿ç»­å¯¹è¯ã€‚

æ¨èä½¿ç”¨ uuid ä½œä¸º `sessionId` ä»¥ä¿è¯å…¨å±€å”¯ä¸€ ï¼Œå¦åˆ™å¯¹è¯å¯èƒ½ä¼š"ä¸²çº¿"ã€‚

å¯¹è¯ä¸­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯æœ‰æ•ˆæœŸä¸º30åˆ†é’Ÿï¼Œè¿‡æœŸåå†æ¬¡å‘é€æ¶ˆæ¯æ— æ³•å…³è”ä¸Šä¸‹æ–‡ã€‚

## 3ã€âœ… æ¨èæ–¹å¼

æ¨èå¤§å®¶ç›´æ¥æ ¹æ® OpenAI å®˜æ–¹çš„æ¥å£æ–‡æ¡£å¼€å‘ä½ çš„ç¨‹åºã€‚

ä½ åªéœ€è¦å°†å®˜æ–¹æ¥å£åŸŸåæ›¿æ¢ä¸º [https://openai.wndbac.cn](https://openai.wndbac.cn)  å³å¯åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹ç›´æ¥è°ƒç”¨ï¼Œæ”¯æŒSSEã€‚

ä¾‹å¦‚å°†ï¼š

https://**api.openai.com**/v1/chat/completions

æ”¹æˆ

https://**openai.wndbac.cn**/v1/chat/completions

æ¥å£URLã€è¯·æ±‚å‚æ•°ã€å“åº”æŠ¥æ–‡ç­‰å…¨éƒ¨ä¸OpenAIå®˜æ–¹ä¸€è‡´ï¼Œè¯·ç›´æ¥å‚è€ƒ [OpenAI å®˜æ–¹æ–‡æ¡£](https://platform.openai.com/docs/introduction) ã€‚

**æµ‹è¯•å‘½ä»¤**

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># æµ‹è¯•èŠå¤©</span><br><span class="line">curl https://api.openai-proxy.com/v1/chat/completions \</span><br><span class="line">  -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">  -H &quot;Authorization: Bearer &lt;your_openai_api_key&gt;&quot; \</span><br><span class="line">  -d &#x27;&#123;</span><br><span class="line">    &quot;model&quot;: &quot;gpt-3.5-turbo&quot;,</span><br><span class="line">    &quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Hello!&quot;&#125;]</span><br><span class="line">  &#125;&#x27;</span><br><span class="line"></span><br><span class="line"># å“åº”ç»“æœ</span><br><span class="line">  &#123;</span><br><span class="line">  &quot;id&quot;: &quot;chatcmpl-21lvNzPaxlsQJh0BEIb9DqoO0pZUY&quot;,</span><br><span class="line">  &quot;object&quot;: &quot;chat.completion&quot;,</span><br><span class="line">  &quot;created&quot;: 1680656905,</span><br><span class="line">  &quot;model&quot;: &quot;gpt-3.5-turbo-0301&quot;,</span><br><span class="line">  &quot;usage&quot;: &#123;</span><br><span class="line">    &quot;prompt_tokens&quot;: 10,</span><br><span class="line">    &quot;completion_tokens&quot;: 10,</span><br><span class="line">    &quot;total_tokens&quot;: 20</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;choices&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;message&quot;: &#123;</span><br><span class="line">        &quot;role&quot;: &quot;assistant&quot;,</span><br><span class="line">        &quot;content&quot;: &quot;Hello there! How can I assist you today?&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;finish_reason&quot;: &quot;stop&quot;,</span><br><span class="line">      &quot;index&quot;: 0</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># æµ‹è¯•ç”Ÿæˆå›¾ç‰‡</span><br><span class="line">curl https://api.openai-proxy.com/v1/images/generations \</span><br><span class="line">  -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">  -H &quot;Authorization: Bearer &lt;your_openai_api_key&gt;&quot; \</span><br><span class="line">  -d &#x27;&#123;</span><br><span class="line">    &quot;prompt&quot;: &quot;A bikini girl&quot;,</span><br><span class="line">    &quot;n&quot;: 2,</span><br><span class="line">    &quot;size&quot;: &quot;512x512&quot;</span><br><span class="line">  &#125;&#x27;</span><br><span class="line"></span><br><span class="line"># å“åº”ç»“æœ</span><br><span class="line">  &#123;</span><br><span class="line">  &quot;created&quot;: 1680705608,</span><br><span class="line">  &quot;data&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;url&quot;: &quot;https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxxxxxx&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;url&quot;: &quot;https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxxxxxx&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

**å¦‚ä½•é€šè¿‡OpenAIå®˜æ–¹çš„æ¥å£å®ç°è¿ç»­å¯¹è¯ï¼Ÿ**

æœ‰å¾ˆå¤šç”¨æˆ·é—®å¦‚ä½•å®ç°è¿ç»­èŠå¤©ï¼Œå®˜æ–¹æ–‡æ¡£å…¶å®å†™çš„å¾ˆæ¸…æ¥š [https://platform.openai.com/docs/guides/chat/introduction](https://platform.openai.com/docs/guides/chat/introduction)

> Chat models take a series of messages as input, and return a model-generated message as output.
> 
> èŠå¤©æ¨¡å‹å°†ä¸€ç³»åˆ—æ¶ˆæ¯ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›æ¨¡å‹ç”Ÿæˆçš„æ¶ˆæ¯ä½œä¸ºè¾“å‡ºã€‚

ä¸‹é¢æ˜¯å®˜æ–¹Pythonè¯­è¨€å®ç°è¿ç»­èŠå¤©çš„ä»£ç ç¤ºä¾‹ï¼Œä¸»è¦çœ‹è¿™ä¸ª messges æ•°ç»„ï¼š

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Note: you need to be using OpenAI Python v0.27.0 for the code below to work</span><br><span class="line">import openai</span><br><span class="line"></span><br><span class="line">openai.ChatCompletion.create(</span><br><span class="line">  model=&quot;gpt-3.5-turbo&quot;,</span><br><span class="line">  messages=[</span><br><span class="line">        &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;,</span><br><span class="line">        &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Who won the world series in 2020?&quot;&#125;,</span><br><span class="line">        &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;The Los Angeles Dodgers won the World Series in 2020.&quot;&#125;,</span><br><span class="line">        &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Where was it played?&quot;&#125;</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

roleä¸ºuseræ˜¯ç”¨æˆ·å‘é€çš„å†…å®¹ï¼Œroleä¸ºassistantæ˜¯AIå›ç­”çš„å†…å®¹ã€‚

OpenAIæœ¬èº«æ˜¯æ²¡æœ‰è®°å¿†çš„ï¼Œå¦‚æœä½ ä¸å‘Šè¯‰ä»–ä½ ä¹‹å‰è¯´äº†ä»€ä¹ˆä»¥åŠä»–ä¹‹å‰å›ç­”äº†ä»€ä¹ˆï¼Œé‚£ä¹ˆä»–åªä¼šæ ¹æ®ä½ æœ€è¿‘ä¸€æ¬¡å‘é€çš„å†…å®¹è¿›è¡Œå›ç­”ã€‚

æ‰€ä»¥ï¼Œè¦æƒ³å®ç°â€œè¿ç»­å¯¹è¯â€ï¼Œæ¯æ¬¡å‘é€æ¶ˆæ¯æ—¶ï¼Œä½ éœ€è¦å°†ä½ ä¹‹å‰å‘é€çš„å†…å®¹(**user**)ä»¥åŠOpenAIä¹‹å‰è¿”å›çš„å†…å®¹(**assistant**)ï¼Œå†ç»“åˆä½ æœ¬æ¬¡æƒ³å‘é€çš„å†…å®¹(**user**) æŒ‰ **æ—¶åº** ç»„åˆæˆä¸€ä¸ª messages[] æ•°ç»„ï¼Œç„¶åå†å°†è¿™ä¸ªæ•°ç»„å‘é€ç»™OpenAIå°±è¡Œäº†ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚

æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œè¿™æ ·è™½ç„¶å¯ä»¥å®ç°â€œè¿ç»­å¯¹è¯â€ï¼Œä½†åŠ¿å¿…é€ æˆæ¯æ¬¡å‘é€çš„æ¶ˆæ¯å†…å®¹ä¼šéå¸¸å¤šï¼Œè€ŒOpenAIæ˜¯æŒ‰å­—æ•°è®¡è´¹çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦æ ¹æ®ä½ å£è¢‹é‡Œçš„é’ç¥¨å»è¡¡é‡æ¯æ¬¡åº”è¯¥æºå¸¦å‡ æ¡èŠå¤©è®°å½•æ¯”è¾ƒåˆé€‚ã€‚

## 4ã€â­ï¸ ç¬¬ä¸‰æ–¹åº”ç”¨

å¦‚æœä½ ç”¨çš„æ˜¯ç¬¬ä¸‰æ–¹å¼€å‘è€…å¼€å‘çš„åŸºäº OpenAI çš„åº”ç”¨ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥æŠŠ [https://openai.wndbac.cn](https://openai.wndbac.cn) è®¾ä¸ºå…¶ä»£ç†æ¥å£åœ°å€ï¼Œè¿™æ ·å°±ç›´æ¥å¯ä»¥åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹ä½¿ç”¨è¯¥åº”ç”¨ã€‚æ¯”å¦‚ä¸‹åˆ—å‡ ä¸ªåº”ç”¨ï¼š

| åç§° | GitHubåœ°å€ | Stars |
| :----- | :----- | :----- |
| OpenAI-Translator | https://github.com/yetone/openai-translator | ![](https://img.shields.io/github/stars/yetone/openai-translator.svg) |
| ChatGPT-Next-Web | https://github.com/Yidadaa/ChatGPT-Next-Web | ![](https://img.shields.io/github/stars/Yidadaa/ChatGPT-Next-Web.svg) |
| ChatGPT-Web | https://github.com/Chanzhaoyu/chatgpt-web |  ![](https://img.shields.io/github/stars/Chanzhaoyu/chatgpt-web.svg) |

## 5ã€ğŸ’° æŸ¥è¯¢ä½™é¢

æ¥å£åœ°å€ (**GETè¯·æ±‚**)

> GET [https://api.openai-proxy.com/pro/balance?apiKey=sk-xxxxxxxxxxxxxx](https://api.openai-proxy.com/pro/balance?apiKey=sk-xxxxxxxxxxxxxx)

è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | é•¿åº¦ | å¿…é¡» | å¤‡æ³¨ |
| :----- | :----- | :----- | :----- | :----- |
| apiKey | String | 64 | æ˜¯ | OpenAI çš„ ApiKey |

ç›¸åº”ç¤ºä¾‹

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;code&quot;: 200,</span><br><span class="line">    &quot;message&quot;: &quot;æ‰§è¡ŒæˆåŠŸ&quot;,</span><br><span class="line">    &quot;data&quot;: &#123;</span><br><span class="line">        &quot;total&quot;: 18.00,</span><br><span class="line">        &quot;balance&quot;: 17.92,</span><br><span class="line">        &quot;used&quot;: 0.08</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

åŸOpenAIå®˜æ–¹åå°æŸ¥è¯¢ä½™é¢çš„æ¥å£ç”±äºè¢«ç”¨æˆ·æ»¥ç”¨ï¼Œå®˜æ–¹ç»™æ’¤é”€äº†ï¼Œç°æœ‰ä¸€ä¸ªæŠ˜ä¸­çš„æ–¹å¼å»è®¡ç®—è´¦æˆ·ä½™é¢ã€‚é€»è¾‘æ˜¯å…ˆå¾—åˆ°OpenAIç»™ä½ è´¦æˆ·æˆæƒçš„æ€»é‡‘é¢ï¼Œç„¶åå‡å»æœ€è¿‘90å¤©ä½ è´¦æˆ·æ¶ˆè€—çš„é‡‘é¢ï¼Œå¾—åˆ°çš„ balance å³ä¸ºè´¦æˆ·å¯ç”¨ä½™é¢ã€‚å¦‚æœä½ çš„è´¦å·å·²ä½¿ç”¨è¶…è¿‡90å¤©ï¼Œæ­¤è®¡ç®—æ–¹å¼ä¼šå­˜åœ¨è¯¯å·®ï¼Œå¦‚æœæƒ³çŸ¥é“å‡†ç¡®çš„æ•°æ®ï¼Œè¯·ç™»å½•OpenAIå®˜ç½‘æŸ¥çœ‹ï¼Œç›®å‰åˆ«æ— ä»–æ³•ã€‚

---

Emailï¼š[towindback@qq.com](mailto:towindback@qq.com)

ä½“éªŒChatGPTï¼šhttps://chat.wndbac.cn

æ›´æ–°æ—¶é—´ï¼š2023-04-15


